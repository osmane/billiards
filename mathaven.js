"use strict";(self.webpackChunkbilliards=self.webpackChunkbilliards||[]).push([[893],{12:(t,e,n)=>{n.d(e,{Dz:()=>v,F8:()=>b,FP:()=>y,KM:()=>s,RZ:()=>m,gn:()=>w,ld:()=>d,n7:()=>g,oN:()=>P,rq:()=>f,t6:()=>a,up:()=>r,v_:()=>o,xb:()=>c});var i=n(4922),o=new i.Pq0(0,0,0),r=new i.Pq0(0,0,1);function a(t){return new i.Pq0(t.x,t.y,t.z)}var l=new i.Pq0;function s(t){return l.copy(r).cross(t)}var u=new i.Pq0;function c(t){return u.copy(t).normalize()}var h=new i.Pq0;function f(t,e){return h.copy(t).add(e).dot(t)<=0}function v(t){return new i.Pq0(1,0,0).applyAxisAngle(r,t)}function p(t){return Math.sign(t)*Math.floor(1e4*(Math.abs(t)+Number.EPSILON))/1e4}function d(t){return t.x=p(t.x),t.y=p(t.y),t.z=p(t.z),t}function y(t,e){return Math.fround(Math.atan2(t,e))}function g(t,e){return Math.fround(Math.pow(t,e))}function b(t){return Math.fround(Math.sin(t))}function w(t){return Math.fround(Math.cos(t))}function m(t){return Math.fround(Math.sqrt(t))}function P(t){return Math.fround(Math.exp(t))}},2651:(t,e,n)=>{n.d(e,{c:()=>y,U:()=>d});var i=n(12),o=n(8090),r=n(4922),a=n(5418);function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"line",void 0),s(this,"geometry",void 0),s(this,"positions",void 0),s(this,"lastPos",new r.Pq0),s(this,"lastVel",new r.Pq0),this.geometry=new r.LoY,this.positions=new Float32Array(3*e),this.geometry.setAttribute("position",new r.THS(this.positions,3)),this.reset();var i=new r.mrM({color:n,opacity:.25,linewidth:3,transparent:!0});this.line=new r.N1A(this.geometry,i),this.line.visible=!1}var e,n;return e=t,(n=[{key:"reset",value:function(){this.geometry.setDrawRange(0,0),this.lastVel.setZ(1)}},{key:"forceTrace",value:function(t){this.lastVel.z=1,this.addTraceGiven(t,this.lastVel,1,.1,1)}},{key:"addTrace",value:function(t,e){if(0!==e.length()){var n=this.lastVel.angleTo(e),i=n>Math.PI/32?.01*a.R:a.R,o=this.lastPos.distanceTo(t);this.addTraceGiven(t,e,o,i,n)}}},{key:"addTraceGiven",value:function(t,e,n,i,o){var r=this.geometry.drawRange.count;0!==r&&n<i||(r>1&&o<1e-4&&r--,this.lastPos.copy(t),this.lastVel.copy(e),this.addPoint(t,r))}},{key:"addPoint",value:function(t,e){var n=3*e;n>this.positions.length||(this.positions[n++]=t.x,this.positions[n++]=t.y,this.positions[n]=t.z,this.geometry.setDrawRange(0,e+1),this.line.geometry.attributes.position.needsUpdate=!0)}}])&&l(e.prototype,n),t}();function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"mesh",void 0),h(this,"shadow",void 0),h(this,"spinAxisArrow",void 0),h(this,"trace",void 0),h(this,"color",void 0),h(this,"m",new r.kn4),this.color=new r.Q1f(e),this.initialiseMesh(e)}var e,n;return e=t,(n=[{key:"updateAll",value:function(t,e){this.updatePosition(t.pos),this.updateArrows(t.pos,t.rvel,t.state),0!==t.rvel.lengthSq()&&(this.updateRotation(t.rvel,e),this.trace.addTrace(t.pos,t.vel))}},{key:"updatePosition",value:function(t){this.mesh.position.copy(t),this.shadow.position.copy(t)}},{key:"updateRotation",value:function(t,e){var n=t.length()*e;this.mesh.rotateOnWorldAxis((0,i.xb)(t),n)}},{key:"updateArrows",value:function(t,e,n){this.spinAxisArrow.setLength(a.R+a.R*e.length()/2,a.R,a.R),this.spinAxisArrow.position.copy(t),this.spinAxisArrow.setDirection((0,i.xb)(e)),n==d.Rolling?this.spinAxisArrow.setColor(13369344):this.spinAxisArrow.setColor(52224)}},{key:"initialiseMesh",value:function(t){var e=new r.WBB(a.R,4),n=new r.tXL({emissive:0,flatShading:!1,vertexColors:!0,forceSinglePass:!0,shininess:25,specular:5592371});this.addDots(e,t),this.mesh=new r.eaF(e,n),this.mesh.name="ball",this.updateRotation((new r.Pq0).random(),100);var o=new r.tcD(.9*a.R,9);o.applyMatrix4((new r.kn4).identity().makeTranslation(0,0,.99*-a.R));var l=new r.V9B({color:1118498});this.shadow=new r.eaF(o,l),this.spinAxisArrow=new r.E0M(i.up,i.v_,2,0,.01,.01),this.spinAxisArrow.visible=!1,this.trace=new u(500,t)}},{key:"addDots",value:function(t,e){var n=t.attributes.position.count,i=new r.Q1f(e);t.setAttribute("color",new r.THS(new Float32Array(3*n),3));for(var o=t.attributes.color,a=0;a<n;a++)o.setXYZ(a,i.r,i.g,i.b)}},{key:"addToScene",value:function(t){t.add(this.mesh),t.add(this.shadow),t.add(this.spinAxisArrow),t.add(this.trace.line)}}])&&c(e.prototype,n),t}();function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){return t.Stationary="Stationary",t.Rolling="Rolling",t.Sliding="Sliding",t.Falling="Falling",t.InPocket="InPocket",t}({}),y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"pos",void 0),p(this,"vel",i.v_.clone()),p(this,"rvel",i.v_.clone()),p(this,"futurePos",i.v_.clone()),p(this,"ballmesh",void 0),p(this,"state","Stationary"),p(this,"pocket",void 0),p(this,"id",t.id++),this.pos=e.clone(),this.ballmesh=new f(n||15658734*Math.random())}var e,n,r;return e=t,r=[{key:"fromSerialised",value:function(e){return t.updateFromSerialised(new t((0,i.t6)(e.pos)),e)}},{key:"updateFromSerialised",value:function(t,e){var n,o;return t.pos.copy(e.pos),t.vel.copy(null!==(n=null==e?void 0:e.vel)&&void 0!==n?n:i.v_),t.rvel.copy(null!==(o=null==e?void 0:e.rvel)&&void 0!==o?o:i.v_),t.state="Stationary",t}}],(n=[{key:"update",value:function(t){this.updatePosition(t),"Falling"==this.state?this.pocket.updateFall(this,t):this.updateVelocity(t)}},{key:"updateMesh",value:function(t){this.ballmesh.updateAll(this,t)}},{key:"updatePosition",value:function(t){this.pos.addScaledVector(this.vel,t)}},{key:"updateVelocity",value:function(t){this.inMotion()&&(this.isRolling()?(this.state="Rolling",(0,o.lx)(this.vel,this.rvel),this.addDelta(t,(0,o.JD)(this.rvel))):(this.state="Sliding",this.addDelta(t,(0,o.p2)(this.vel,this.rvel))))}},{key:"addDelta",value:function(t,e){e.v.multiplyScalar(t),e.w.multiplyScalar(t),this.passesZero(e)||(this.vel.add(e.v),this.rvel.add(e.w))}},{key:"passesZero",value:function(t){var e=(0,i.rq)(this.vel,t.v),n=(0,i.rq)(this.rvel,t.w);return!!(("Rolling"===this.state?e||n:e&&n)&&Math.abs(this.rvel.z)<.01)&&(this.setStationary(),!0)}},{key:"setStationary",value:function(){this.vel.copy(i.v_),this.rvel.copy(i.v_),this.state="Stationary"}},{key:"isRolling",value:function(){return 0!==this.vel.lengthSq()&&0!==this.rvel.lengthSq()&&(0,o.Mq)(this.vel,this.rvel).length()<t.transition}},{key:"onTable",value:function(){return"Falling"!==this.state&&"InPocket"!==this.state}},{key:"inMotion",value:function(){return"Rolling"===this.state||"Sliding"===this.state||this.isFalling()}},{key:"isFalling",value:function(){return"Falling"===this.state}},{key:"futurePosition",value:function(t){return this.futurePos.copy(this.pos).addScaledVector(this.vel,t),this.futurePos}},{key:"fround",value:function(){this.pos.x=Math.fround(this.pos.x),this.pos.y=Math.fround(this.pos.y),this.vel.x=Math.fround(this.vel.x),this.vel.y=Math.fround(this.vel.y),this.rvel.x=Math.fround(this.rvel.x),this.rvel.y=Math.fround(this.rvel.y),this.rvel.z=Math.fround(this.rvel.z)}},{key:"serialise",value:function(){return{pos:this.pos.clone(),id:this.id}}}])&&v(e.prototype,n),r&&v(e,r),t}();p(y,"id",0),p(y,"transition",.05)},3894:(t,e,n)=>{n.d(e,{F:()=>p});var i=n(2651),o=n(4922),r=n(5418),a=n(12);function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"normalImpulse",void 0),s(this,"tangentialImpulse",void 0)}var e,n;return e=t,(n=[{key:"dynamicFriction",value:function(t){return.01+.108*(0,a.oN)(-1.088*t)}},{key:"updateVelocities",value:function(t,e){var n=p.positionsAtContact(t,e);t.ballmesh.trace.forceTrace(n.a),e.ballmesh.trace.forceTrace(n.b);var i=n.b.sub(n.a).normalize(),a=new o.Pq0(-i.y,i.x,0),l=t.vel.clone().sub(e.vel).add(i.clone().multiplyScalar(-r.R).cross(t.rvel).sub(i.clone().multiplyScalar(r.R).cross(e.rvel))),s=i.dot(l),u=l.addScaledVector(i,-s),c=u.length(),h=a.dot(u),f=this.dynamicFriction(c);this.normalImpulse=-1.99*s/(2/r.m),this.tangentialImpulse=.25*Math.min(f*Math.abs(this.normalImpulse)/c,1/7)*-h;var v=i.clone().multiplyScalar(this.normalImpulse),d=a.clone().multiplyScalar(this.tangentialImpulse);t.vel.addScaledVector(v,1/r.m).addScaledVector(d,1/r.m),e.vel.addScaledVector(v,-1/r.m).addScaledVector(d,-1/r.m);var y=i.clone().multiplyScalar(-r.R).cross(d),g=i.clone().multiplyScalar(r.R).cross(d);return t.rvel.addScaledVector(y,1/r.I),e.rvel.addScaledVector(g,1/r.I),s}}])&&l(e.prototype,n),t}();function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h,f,v,p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"willCollide",value:function(t,e,n){return(t.inMotion()||e.inMotion())&&t.onTable()&&e.onTable()&&t.futurePosition(n).distanceToSquared(e.futurePosition(n))<4*r.R*r.R}},{key:"collide",value:function(e,n){return t.updateVelocities(e,n)}},{key:"positionsAtContact",value:function(t,e){var n=t.pos.distanceTo(e.pos),i=t.vel.clone().sub(e.vel),o=(n-2*r.R)/i.length()||0;return{a:t.pos.clone().addScaledVector(t.vel,o),b:e.pos.clone().addScaledVector(e.vel,o)}}},{key:"updateVelocities",value:function(e,n){var o=t.model.updateVelocities(e,n);return e.state=i.U.Sliding,n.state=i.U.Sliding,o}}],null&&c(e.prototype,null),n&&c(e,n),t}();h=p,f="model",v=new u,f in h?Object.defineProperty(h,f,{value:v,enumerable:!0,configurable:!0,writable:!0}):h[f]=v},4057:(t,e,n)=>{var i=.1406,o=.02625,r=n(4841);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e,n){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n||t):o.value}},s(t,e,n||t)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}var f=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(t=function(t,e,n){return e=u(e),function(t,e){return!e||"object"!=((n=e)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e;var n}(t,h()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}(this,e,arguments),"h",[]),l(t,"extractValues",(function(e){return t.h.map(e).map((function(t){return null!=t?t:0}))})),t}var n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,i=[{key:"updateSingleStep",value:function(t){s(u(e.prototype),"updateSingleStep",this).call(this,t),this.h.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){l(t,e,n[e])}))}return t}({},this))}}],i&&a(n.prototype,i),e}(r.z),v={responsive:!0,showLink:!0,plotlyServerURL:"https://chart-studio.plotly.com"},p={legend:{font:{color:"#4D5663"},bgcolor:"#e5e6F9"},title:{text:"",font:{size:11}},xaxis:{title:"impulse",tickfont:{color:"#4D5663"},gridcolor:"#E1E5ED",titlefont:{color:"#4D5663"},zerolinecolor:"#E1E5ED"},yaxis:{title:"value",tickfont:{color:"#4D5663"},zeroline:!1,gridcolor:"#E1E5ED",titlefont:{color:"#4D5663"},zerolinecolor:"#E1E5ED"},plot_bgcolor:"#F5F6F9",paper_bgcolor:"#F2F6F9"};function d(t){return"hsl(".concat(137.5*t%360,", ").concat(70,"%, ").concat(50,"%)")}function y(t,e,n,i){return{x:t,y:e,name:n,line:{color:i,width:1.3},mode:"lines",type:"scatter"}}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"plot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t/o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5*t/o,a=new f(i,o,.98,.212,.14);try{a.solvePaper(t,e,n,r)}catch(t){console.error(t)}var l=a.extractValues,s=l((function(t){return t.P}));p.title.text="<b>Figure.12</b> Slip–impulse curves \nfor V0 = 2 m/s, α = 45◦,ωS0 = 2V0/R, and ωT0 = 1.5V0/R \n<br>(s and φ are for the slip at the cushion, \nand sʹ and φʹ are for the slip at the table)",window.Plotly.newPlot("mathaven-impulse",[y(s,l((function(t){return t.s})),"s",d(0)),y(s,l((function(t){return t.φ})),"φ",d(1)),y(s,l((function(t){return t.sʹ})),"s'",d(2)),y(s,l((function(t){return t.φʹ})),"φʹ",d(3)),y(s,l((function(t){return t.WzI})),"WzI",d(4)),y(s,l((function(t){return t.P})),"P",d(5))],p,v)}}],n&&g(e.prototype,n),t}();function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"getFinalState",value:function(t,e,n,a){try{var l=new r.z(i,o,.98,.212,.14);l.solvePaper(t,e,n,a);var s=l.vy,u=l.vx;return{beta:Math.atan2(-s,u)*(180/Math.PI),speed:Math.sqrt(u*u+s*s)}}catch(t){return console.error(t),{beta:NaN,speed:NaN}}}},{key:"plot",value:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return 0},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t){return t/o},a=[],l=[],s=[],u=-1;u<=2;u++){var c=[],h=[];s=[];for(var f=1;f<90;f+=9){s.push(f);var g=this.getFinalState(1,f*(Math.PI/180),i(u),r(u));c.push(g.speed),h.push(g.beta)}a.push(c),l.push(h)}var b=s;p.title.text=n,window.Plotly.newPlot(t,[y(b,a[0],"k=-1",d(0)),y(b,a[1],"k=0",d(1)),y(b,a[2],"k=1",d(2)),y(b,a[3],"k=2",d(3))],p,v),window.Plotly.newPlot(e,[y(b,l[0],"k=-1",d(0)),y(b,l[1],"k=0",d(1)),y(b,l[2],"k=1",d(2)),y(b,l[3],"k=2",d(3))],p,v)}}],n&&w(e.prototype,n),t}(),P=n(4922),M=n(2651),k=n(12),x=n(3894);function R(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,"log",void 0),this.log=e}var e,n;return e=t,(n=[{key:"dynamicFriction",value:function(e){return t.a+t.b*Math.exp(-t.c*e)}},{key:"relativeVelocity",value:function(e,n,i,o){return Math.sqrt(Math.pow(e*Math.sin(o)-i*t.R,2)+Math.pow(Math.cos(o)*n*t.R,2))}},{key:"throwAngle",value:function(e,n,i,o){var r=this.relativeVelocity(e,n,i,o),a=this.dynamicFriction(r),l=Math.min(a*e*Math.cos(o)/r,1/7)*(e*Math.sin(o)-t.R*i),s=e*Math.cos(o);return this.log("inputs:v=".concat(e,", ωx=").concat(n,", ωz=").concat(i,", ϕ=").concat(o)),this.log("   v * Math.sin(ϕ) =".concat(e*Math.sin(o))),this.log("   CollisionThrow.R * ωz =".concat(t.R*i)),this.log("   Math.min((μ * v * Math.cos(ϕ)) / vRel, 1 / 7) =".concat(Math.min(a*e*Math.cos(o)/r,1/7))),this.log("   (v * Math.sin(ϕ) - CollisionThrow.R * ωz) =".concat(e*Math.sin(o)-t.R*i)),this.log(""),this.log("vRel = ",r),this.log("μ = ",a),this.log("numerator = ",l),this.log("denominator = ",s),this.log("throw = ",Math.atan2(l,s)),Math.atan2(l,s)}},{key:"plot",value:function(e,n,i,o){var r=new M.c(k.v_);r.vel.copy(new P.Pq0(0,e,0)),r.rvel.copy(new P.Pq0(n,0,i));var a=new P.Pq0(0,2*t.R).applyAxisAngle(k.up,o),l=new M.c(a);return x.F.model.updateVelocities(r,l),Math.atan2(x.F.model.tangentialImpulse,-x.F.model.normalImpulse)}}])&&R(e.prototype,n),t}();function O(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){F(t,e,n[e])}))}return t}S(A,"R",.029),S(A,"a",.01),S(A,"b",.108),S(A,"c",1.088);var z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"degToRad",value:function(t){return t*(Math.PI/180)}},{key:"radToDeg",value:function(t){return t*(180/Math.PI)}},{key:"plotCutAngle",value:function(){var t=A.R;this.plot("collision-throw-roll",[.447,1.341,3.129],(function(e){return e/t})),this.plot("collision-throw-stun",[.447,1.341,3.129],(function(t){return 0})),this.plotRolls("collision-throw-varying-roll",[0,.25,.5,1],(function(e){return e/t}),(function(t){return 0}),(function(t){return t})),this.plotRolls("collision-throw-varying-side",[0,.25,.5,1],(function(e){return e/t}),(function(e){return 1/t*(e-45)/45}),(function(t){return 0})),new A(console.log).plot(.5,-15,-10,Math.PI/8)}},{key:"plot",value:function(t,e,n){var i=this,o=[],r=[];e.forEach((function(t){var e=[];r=[];for(var a=1;a<90;a+=1){r.push(a);var l=(new A).plot(t,n(t),0,i.degToRad(a));e.push(i.radToDeg(l))}o.push(e)}));var a=T({},p);a.title.text="Throw effect (WIP)\n    <br>throw vs. cut angle for various-speed ".concat(t," shots\n    <br>from https://billiards.colostate.edu/technical_proofs/new/TP_A-14.pdf"),window.Plotly.newPlot(t,[y(r,o[0],"slow",d(4)),y(r,o[1],"medium",d(5)),y(r,o[2],"fast",d(6))],a,v)}},{key:"plotRolls",value:function(t,e,n,i,o){var r=this,a=[],l=[];e.forEach((function(t){var e=[];l=[];for(var s=1;s<90;s+=1){l.push(s);var u=(new A).plot(1,n(t),i(s),r.degToRad(o(s)));e.push(r.radToDeg(u))}a.push(e)}));var s=T({},p);s.title.text="Throw effect (WIP)\n    <br>throw vs. cut angle for various-speed ".concat(t," shots\n    <br>from https://billiards.colostate.edu/technical_proofs/new/TP_A-14.pdf"),window.Plotly.newPlot(t,[y(l,a[0],"0",d(4)),y(l,a[1],"0.25",d(5)),y(l,a[2],"0.5",d(6)),y(l,a[3],"1.0",d(7))],s,v)}}],n&&O(e.prototype,n),t}();(new b).plot(),(new m).plot("mathaven-figure9-speed","mathaven-figure9-angle","<b>Figure.9</b> Rebound speed and rebound angle versus incident angle <br>\n    for different topspins of the ball, ωT0 = kV0/R and V0 = 1 m/s with no sidespin"),(new m).plot("mathaven-figure10-speed","mathaven-figure10-angle","<b>Figure.10</b> Rebound speed and rebound angle versus incident angle <br>\nfor different sidespins of the ball,ωS0 = kV0/R and V0 = 1 m/s with the ball rolling (ωT0 = V0/R)",(function(t){return t/o}),(function(t){return 1/o})),(new z).plotCutAngle()},4841:(t,e,n)=>{n.d(e,{z:()=>l});var i=n(12),o=n(5418);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){function t(e,n,i,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"P",0),a(this,"WzI",0),a(this,"vx",void 0),a(this,"vy",void 0),a(this,"ωx",void 0),a(this,"ωy",void 0),a(this,"ωz",void 0),a(this,"s",void 0),a(this,"φ",void 0),a(this,"sʹ",void 0),a(this,"φʹ",void 0),a(this,"i",0),a(this,"N",100),a(this,"M",void 0),a(this,"R",void 0),a(this,"μs",void 0),a(this,"μw",void 0),a(this,"ee",void 0),this.M=e,this.R=n,this.ee=i,this.μs=o,this.μw=r}var e,n;return e=t,(n=[{key:"updateSlipSpeedsAndAngles",value:function(){var t=this.R,e=this.vx+this.ωy*t*o.Z3-this.ωz*t*o.o5,n=-this.vy*o.Z3+this.ωx*t,r=this.vx-this.ωy*t,a=this.vy+this.ωx*t;this.s=(0,i.RZ)((0,i.n7)(e,2)+(0,i.n7)(n,2)),this.φ=(0,i.FP)(n,e),this.φ<0&&(this.φ+=2*Math.PI),this.sʹ=(0,i.RZ)((0,i.n7)(r,2)+(0,i.n7)(a,2)),this.φʹ=(0,i.FP)(a,r),this.φʹ<0&&(this.φʹ+=2*Math.PI)}},{key:"compressionPhase",value:function(){for(var t=Math.max(this.M*this.vy/this.N,.001);this.vy>0;)this.updateSingleStep(t)}},{key:"restitutionPhase",value:function(t){var e=Math.max(t/this.N,.001);for(this.WzI=0;this.WzI<t;)this.updateSingleStep(e)}},{key:"updateSingleStep",value:function(t){if(this.updateSlipSpeedsAndAngles(),this.updateVelocity(t),this.updateAngularVelocity(t),this.updateWorkDone(t),this.i++>10*this.N)throw new Error("Solution not found")}},{key:"updateVelocity",value:function(t){var e=this.μs,n=this.μw,r=this.M;this.vx-=1/r*(n*(0,i.gn)(this.φ)+e*(0,i.gn)(this.φʹ)*(o.Z3+n*(0,i.F8)(this.φ)*o.o5))*t,this.vy-=1/r*(o.o5-n*o.Z3*(0,i.F8)(this.φ)+e*(0,i.F8)(this.φʹ)*(o.Z3+n*(0,i.F8)(this.φ)*o.o5))*t}},{key:"updateAngularVelocity",value:function(t){var e=this.μs,n=this.μw,r=this.M,a=this.R;this.ωx+=-5/(2*r*a)*(n*(0,i.F8)(this.φ)+e*(0,i.F8)(this.φʹ)*(o.Z3+n*(0,i.F8)(this.φ)*o.o5))*t,this.ωy+=-5/(2*r*a)*(n*(0,i.gn)(this.φ)*o.Z3-e*(0,i.gn)(this.φʹ)*(o.Z3+n*(0,i.F8)(this.φ)*o.o5))*t,this.ωz+=5/(2*r*a)*(n*(0,i.gn)(this.φ)*o.o5)*t}},{key:"updateWorkDone",value:function(t){var e=t*Math.abs(this.vy);this.WzI+=e,this.P+=t}},{key:"solvePaper",value:function(t,e,n,o){this.solve(t*(0,i.gn)(e),t*(0,i.F8)(e),-o*(0,i.F8)(e),o*(0,i.gn)(e),n)}},{key:"solve",value:function(t,e,n,i,o){this.vx=t,this.vy=e,this.ωx=n,this.ωy=i,this.ωz=o,this.WzI=0,this.P=0,this.i=0,this.compressionPhase();var r=this.ee*this.ee*this.WzI;this.restitutionPhase(r)}}])&&r(e.prototype,n),t}()},5418:(t,e,n)=>{n.d(e,{I:()=>r,Mz:()=>i,PX:()=>q,Qg:()=>R,R:()=>P,Wv:()=>A,XF:()=>b,XM:()=>g,Ys:()=>O,Z3:()=>d,_m:()=>p,cM:()=>F,e:()=>h,ee:()=>f,g:()=>a,gT:()=>u,gf:()=>s,gx:()=>m,jG:()=>k,kL:()=>c,kM:()=>T,ki:()=>V,ko:()=>z,m:()=>M,mu:()=>l,o5:()=>y,oV:()=>v,oo:()=>w,x3:()=>o,xO:()=>S});var i,o,r,a=9.8,l=.00985,s=.16,u=.85,c=.034,h=.86,f=.98,v=.212,p=.14,d=.4,y=Math.sqrt(21)/5,g=2.84,b=1.42,w=.03075,m=.21,P=.028575,M=.17;function k(t){P=t,null==x||x()}function x(){i=l*M*a*2/3*c,o=7/(5*Math.sqrt(2))*P*l*M*a,r=.4*M*P*P}function R(t){M=t,null==x||x()}function S(t){l=t,x()}function A(t){c=t,x()}function O(t){s=t}function F(t){h=t}function T(t){u=t}function z(t){v=t}function V(t){p=t}function q(t){f=t}x()},8090:(t,e,n)=>{n.d(e,{$8:()=>j,Gp:()=>F,JD:()=>w,Mq:()=>y,QK:()=>P,QV:()=>I,Qy:()=>_,Un:()=>O,c0:()=>A,lx:()=>m,p2:()=>b,s0:()=>S,t6:()=>C,yO:()=>T});var i=n(4922),o=n(12),r=n(5418),a=n(4841),l=.02,s=.5,u=1,c=0,h=-.05,f=0,v=.06,p=.5,d=new i.Pq0;function y(t,e){return d.copy(t).addScaledVector((0,o.KM)(e),r.R)}var g={v:new i.Pq0,w:new i.Pq0};function b(t,e){var n=function(t,e){return y(t,e).setZ(0)}(t,e);return g.v.copy((0,o.xb)(n).multiplyScalar(-r.gf*r.g)),g.w.copy((0,o.xb)((0,o.KM)(n)).multiplyScalar(2.5*r.gf*r.g/r.R)),g.w.setZ(r.Mz/(r.m*r.R*r.R)*-2.5*Math.sign(e.z)),g}function w(t){var e=new i.Pq0(t.x,t.y,0).length(),n=5/7*r.x3/(r.m*r.R)/e,o=5/7*r.x3/(r.m*r.R*r.R)/e;return g.v.set(-n*t.y,n*t.x,0),g.w.set(-o*t.x,-o*t.y,r.Mz/(r.m*r.R*r.R)*-2.5*Math.sign(t.z)),g}function m(t,e){var n=e.z;e.copy((0,o.KM)(t).multiplyScalar(1/r.R)),e.setZ(n)}function P(t,e,n,i){var r=i(e.clone().applyAxisAngle(o.up,t),n.clone().applyAxisAngle(o.up,t));return r.v.applyAxisAngle(o.up,-t),r.w.applyAxisAngle(o.up,-t),r}Object.freeze(g);var M=.1*r.R,k=Math.asin(M/r.R),x=(0,o.F8)(k),R=(0,o.gn)(k);function S(t,e){return new i.Pq0(t.x*x-t.z*R+r.R*e.y,-t.y-r.R*e.z*R+r.R*e.x*x)}function A(t){return t.x*R}function O(t){var e=3.5/r.m;return t.length()/e}function F(t){var e,n=1/r.m,o=.39+.257*(e=new i.Pq0(t/R,0,0)).x-.044*e.x*e.x;return r.gT*((1+o)*t)/n}function T(t,e){var n=F(A(t));return O(S(t,e))<=n}function z(t,e){return{c:A(t),s:S(t,e),A:3.5/r.m,B:1/r.m}}function V(t,e){var n=z(t,e),i=n.c,o=n.s,a=n.A,l=n.B,s=(1+r.e)*(i/l);return E(-o.x/a*x-s*R,o.y/a,o.x/a*R-s*x)}function q(t,e){var n=z(t,e),o=n.c,a=n.B,d=(1+r.e)*(o/a),y=function(t,e){var n,o,a,d=Math.atan2(Math.abs(t.y),Math.max(1e-6,t.x)),y=S(t,null!=e?e:new i.Pq0(0,0,0)).length();return n=u*r._m+(c+h*d+f*d*d)+v*Math.tanh(y/Math.max(1e-6,p)),o=l,a=s,Math.max(o,Math.min(a,n))}(t,e),g=Math.atan2(t.y,t.x),b=Math.cos(g),w=Math.sin(g);return E(-y*d*b*R-d*R,y*d*w,y*d*b*R-d*x)}function I(t,e){return T(t,e)?V(t,e):q(t,e)}function j(t,e){var n=V(t,e),i=q(t,e),o=Math.sign(t.y)===Math.sign(e.z)?Math.cos(Math.atan2(t.y,t.x)):1;return{v:i.v.lerp(n.v,o),w:i.w.lerp(n.w,o)}}function E(t,e,n){return{v:new i.Pq0(t/r.m,e/r.m),w:new i.Pq0(-r.R/r.I*e*x,r.R/r.I*(t*x-n*R),r.R/r.I*e*R)}}function D(t,e){var n=new a.z(r.m,r.R,r.ee,r.oV,r._m);n.solve(t.x,t.y,e.x,e.y,e.z);var o=new i.Pq0(n.vx,n.vy,0),l=new i.Pq0(n.ωx,n.ωy,n.ωz);return{v:o.sub(t),w:l.sub(e)}}function _(t,e){return P(Math.PI/2,t,e,D)}function C(t,e){var n=Math.atan2(-t.x,t.y),i=2.5*e.length()*(t.length()*r.R)/(r.R*r.R),a=e.clone().normalize();return(0,o.KM)(a).applyAxisAngle(a,n).multiplyScalar(i)}}},t=>{t(t.s=4057)}]);