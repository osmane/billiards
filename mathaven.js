"use strict";(self.webpackChunkbilliards=self.webpackChunkbilliards||[]).push([[893],{12:(t,e,n)=>{n.d(e,{Dz:()=>v,F8:()=>b,FP:()=>y,KM:()=>l,RZ:()=>m,gn:()=>w,ld:()=>d,n7:()=>g,oN:()=>P,rq:()=>f,t6:()=>a,up:()=>r,v_:()=>o,xb:()=>c});var i=n(4922),o=new i.Pq0(0,0,0),r=new i.Pq0(0,0,1);function a(t){return new i.Pq0(t.x,t.y,t.z)}var s=new i.Pq0;function l(t){return s.copy(r).cross(t)}var u=new i.Pq0;function c(t){return u.copy(t).normalize()}var h=new i.Pq0;function f(t,e){return h.copy(t).add(e).dot(t)<=0}function v(t){return new i.Pq0(1,0,0).applyAxisAngle(r,t)}function p(t){return Math.sign(t)*Math.floor(1e4*(Math.abs(t)+Number.EPSILON))/1e4}function d(t){return t.x=p(t.x),t.y=p(t.y),t.z=p(t.z),t}function y(t,e){return Math.fround(Math.atan2(t,e))}function g(t,e){return Math.fround(Math.pow(t,e))}function b(t){return Math.fround(Math.sin(t))}function w(t){return Math.fround(Math.cos(t))}function m(t){return Math.fround(Math.sqrt(t))}function P(t){return Math.fround(Math.exp(t))}},2651:(t,e,n)=>{n.d(e,{c:()=>y,U:()=>d});var i=n(12),o=n(8090),r=n(4922),a=n(5418);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"line",void 0),l(this,"geometry",void 0),l(this,"positions",void 0),l(this,"lastPos",new r.Pq0),l(this,"lastVel",new r.Pq0),this.geometry=new r.LoY,this.positions=new Float32Array(3*e),this.geometry.setAttribute("position",new r.THS(this.positions,3)),this.reset();var i=new r.mrM({color:n,opacity:.25,linewidth:3,transparent:!0});this.line=new r.N1A(this.geometry,i),this.line.visible=!1}var e,n;return e=t,(n=[{key:"reset",value:function(){this.geometry.setDrawRange(0,0),this.lastVel.setZ(1)}},{key:"forceTrace",value:function(t){this.lastVel.z=1,this.addTraceGiven(t,this.lastVel,1,.1,1)}},{key:"addTrace",value:function(t,e){if(0!==e.length()){var n=this.lastVel.angleTo(e),i=n>Math.PI/32?.01*a.R:a.R,o=this.lastPos.distanceTo(t);this.addTraceGiven(t,e,o,i,n)}}},{key:"addTraceGiven",value:function(t,e,n,i,o){var r=this.geometry.drawRange.count;0!==r&&n<i||(r>1&&o<1e-4&&r--,this.lastPos.copy(t),this.lastVel.copy(e),this.addPoint(t,r))}},{key:"addPoint",value:function(t,e){var n=3*e;n>this.positions.length||(this.positions[n++]=t.x,this.positions[n++]=t.y,this.positions[n]=t.z,this.geometry.setDrawRange(0,e+1),this.line.geometry.attributes.position.needsUpdate=!0)}}])&&s(e.prototype,n),t}();function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"mesh",void 0),h(this,"shadow",void 0),h(this,"spinAxisArrow",void 0),h(this,"trace",void 0),h(this,"color",void 0),h(this,"m",new r.kn4),this.color=new r.Q1f(e),this.initialiseMesh(e)}var e,n;return e=t,(n=[{key:"updateAll",value:function(t,e){this.updatePosition(t.pos),this.updateArrows(t.pos,t.rvel,t.state),0!==t.rvel.lengthSq()&&(this.updateRotation(t.rvel,e),this.trace.addTrace(t.pos,t.vel))}},{key:"updatePosition",value:function(t){this.mesh.position.copy(t),this.shadow.position.copy(t)}},{key:"updateRotation",value:function(t,e){var n=t.length()*e;this.mesh.rotateOnWorldAxis((0,i.xb)(t),n)}},{key:"updateArrows",value:function(t,e,n){this.spinAxisArrow.setLength(a.R+a.R*e.length()/2,a.R,a.R),this.spinAxisArrow.position.copy(t),this.spinAxisArrow.setDirection((0,i.xb)(e)),n==d.Rolling?this.spinAxisArrow.setColor(13369344):this.spinAxisArrow.setColor(52224)}},{key:"initialiseMesh",value:function(t){var e=new r.WBB(a.R,4),n=new r.tXL({emissive:0,flatShading:!1,vertexColors:!0,forceSinglePass:!0,shininess:25,specular:5592371});this.addDots(e,t),this.mesh=new r.eaF(e,n),this.mesh.name="ball",this.updateRotation((new r.Pq0).random(),100);var o=new r.tcD(.9*a.R,9);o.applyMatrix4((new r.kn4).identity().makeTranslation(0,0,.99*-a.R));var s=new r.V9B({color:1118498});this.shadow=new r.eaF(o,s),this.spinAxisArrow=new r.E0M(i.up,i.v_,2,0,.01,.01),this.spinAxisArrow.visible=!1,this.trace=new u(500,t)}},{key:"addDots",value:function(t,e){var n=this,i=t.attributes.position.count,o=new r.Q1f(e),a=new r.Q1f(11149858);t.setAttribute("color",new r.THS(new Float32Array(3*i),3));for(var s=t.attributes.color,l=0;l<i/3;l++)this.colorVerticesForFace(l,s,this.scaleNoise(o.r),this.scaleNoise(o.g),this.scaleNoise(o.b));[0,96,111,156,186,195].forEach((function(t){n.colorVerticesForFace(t/3,s,a.r,a.g,a.b)}))}},{key:"addToScene",value:function(t){t.add(this.mesh),t.add(this.shadow),t.add(this.spinAxisArrow),t.add(this.trace.line)}},{key:"colorVerticesForFace",value:function(t,e,n,i,o){e.setXYZ(3*t+0,n,i,o),e.setXYZ(3*t+1,n,i,o),e.setXYZ(3*t+2,n,i,o)}},{key:"scaleNoise",value:function(t){return(1-.25*Math.random())*t}}])&&c(e.prototype,n),t}();function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){return t.Stationary="Stationary",t.Rolling="Rolling",t.Sliding="Sliding",t.Falling="Falling",t.InPocket="InPocket",t}({}),y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"pos",void 0),p(this,"vel",i.v_.clone()),p(this,"rvel",i.v_.clone()),p(this,"futurePos",i.v_.clone()),p(this,"ballmesh",void 0),p(this,"state","Stationary"),p(this,"pocket",void 0),p(this,"id",t.id++),this.pos=e.clone(),this.ballmesh=new f(n||15658734*Math.random())}var e,n,r;return e=t,r=[{key:"fromSerialised",value:function(e){return t.updateFromSerialised(new t((0,i.t6)(e.pos)),e)}},{key:"updateFromSerialised",value:function(t,e){var n,o;return t.pos.copy(e.pos),t.vel.copy(null!==(n=null==e?void 0:e.vel)&&void 0!==n?n:i.v_),t.rvel.copy(null!==(o=null==e?void 0:e.rvel)&&void 0!==o?o:i.v_),t.state="Stationary",t}}],(n=[{key:"update",value:function(t){this.updatePosition(t),"Falling"==this.state?this.pocket.updateFall(this,t):this.updateVelocity(t)}},{key:"updateMesh",value:function(t){this.ballmesh.updateAll(this,t)}},{key:"updatePosition",value:function(t){this.pos.addScaledVector(this.vel,t)}},{key:"updateVelocity",value:function(t){this.inMotion()&&(this.isRolling()?(this.state="Rolling",(0,o.lx)(this.vel,this.rvel),this.addDelta(t,(0,o.JD)(this.rvel))):(this.state="Sliding",this.addDelta(t,(0,o.p2)(this.vel,this.rvel))))}},{key:"addDelta",value:function(t,e){e.v.multiplyScalar(t),e.w.multiplyScalar(t),this.passesZero(e)||(this.vel.add(e.v),this.rvel.add(e.w))}},{key:"passesZero",value:function(t){var e=(0,i.rq)(this.vel,t.v),n=(0,i.rq)(this.rvel,t.w);return!!(("Rolling"===this.state?e||n:e&&n)&&Math.abs(this.rvel.z)<.01)&&(this.setStationary(),!0)}},{key:"setStationary",value:function(){this.vel.copy(i.v_),this.rvel.copy(i.v_),this.state="Stationary"}},{key:"isRolling",value:function(){return 0!==this.vel.lengthSq()&&0!==this.rvel.lengthSq()&&(0,o.Mq)(this.vel,this.rvel).length()<t.transition}},{key:"onTable",value:function(){return"Falling"!==this.state&&"InPocket"!==this.state}},{key:"inMotion",value:function(){return"Rolling"===this.state||"Sliding"===this.state||this.isFalling()}},{key:"isFalling",value:function(){return"Falling"===this.state}},{key:"futurePosition",value:function(t){return this.futurePos.copy(this.pos).addScaledVector(this.vel,t),this.futurePos}},{key:"fround",value:function(){this.pos.x=Math.fround(this.pos.x),this.pos.y=Math.fround(this.pos.y),this.vel.x=Math.fround(this.vel.x),this.vel.y=Math.fround(this.vel.y),this.rvel.x=Math.fround(this.rvel.x),this.rvel.y=Math.fround(this.rvel.y),this.rvel.z=Math.fround(this.rvel.z)}},{key:"serialise",value:function(){return{pos:this.pos.clone(),id:this.id}}}])&&v(e.prototype,n),r&&v(e,r),t}();p(y,"id",0),p(y,"transition",.05)},3894:(t,e,n)=>{n.d(e,{F:()=>p});var i=n(2651),o=n(4922),r=n(5418),a=n(12);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"normalImpulse",void 0),l(this,"tangentialImpulse",void 0)}var e,n;return e=t,(n=[{key:"dynamicFriction",value:function(t){return.01+.108*(0,a.oN)(-1.088*t)}},{key:"updateVelocities",value:function(t,e){var n=p.positionsAtContact(t,e);t.ballmesh.trace.forceTrace(n.a),e.ballmesh.trace.forceTrace(n.b);var i=n.b.sub(n.a).normalize(),a=new o.Pq0(-i.y,i.x,0),s=t.vel.clone().sub(e.vel).add(i.clone().multiplyScalar(-r.R).cross(t.rvel).sub(i.clone().multiplyScalar(r.R).cross(e.rvel))),l=i.dot(s),u=s.addScaledVector(i,-l),c=u.length(),h=a.dot(u),f=this.dynamicFriction(c);this.normalImpulse=-1.99*l/(2/r.m),this.tangentialImpulse=.25*Math.min(f*Math.abs(this.normalImpulse)/c,1/7)*-h;var v=i.clone().multiplyScalar(this.normalImpulse),d=a.clone().multiplyScalar(this.tangentialImpulse);t.vel.addScaledVector(v,1/r.m).addScaledVector(d,1/r.m),e.vel.addScaledVector(v,-1/r.m).addScaledVector(d,-1/r.m);var y=i.clone().multiplyScalar(-r.R).cross(d),g=i.clone().multiplyScalar(r.R).cross(d);return t.rvel.addScaledVector(y,1/r.I),e.rvel.addScaledVector(g,1/r.I),l}}])&&s(e.prototype,n),t}();function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h,f,v,p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"willCollide",value:function(t,e,n){return(t.inMotion()||e.inMotion())&&t.onTable()&&e.onTable()&&t.futurePosition(n).distanceToSquared(e.futurePosition(n))<4*r.R*r.R}},{key:"collide",value:function(e,n){return t.updateVelocities(e,n)}},{key:"positionsAtContact",value:function(t,e){var n=t.pos.distanceTo(e.pos),i=t.vel.clone().sub(e.vel),o=(n-2*r.R)/i.length()||0;return{a:t.pos.clone().addScaledVector(t.vel,o),b:e.pos.clone().addScaledVector(e.vel,o)}}},{key:"updateVelocities",value:function(e,n){var o=t.model.updateVelocities(e,n);return e.state=i.U.Sliding,n.state=i.U.Sliding,o}}],null&&c(e.prototype,null),n&&c(e,n),t}();h=p,f="model",v=new u,f in h?Object.defineProperty(h,f,{value:v,enumerable:!0,configurable:!0,writable:!0}):h[f]=v},4057:(t,e,n)=>{var i=.1406,o=.02625,r=n(4841);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n||t):o.value}},l(t,e,n||t)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}var f=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(t=function(t,e,n){return e=u(e),function(t,e){return!e||"object"!=((n=e)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e;var n}(t,h()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}(this,e,arguments),"h",[]),s(t,"extractValues",(function(e){return t.h.map(e).map((function(t){return null!=t?t:0}))})),t}var n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,i=[{key:"updateSingleStep",value:function(t){l(u(e.prototype),"updateSingleStep",this).call(this,t),this.h.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){s(t,e,n[e])}))}return t}({},this))}}],i&&a(n.prototype,i),e}(r.z),v={responsive:!0,showLink:!0,plotlyServerURL:"https://chart-studio.plotly.com"},p={legend:{font:{color:"#4D5663"},bgcolor:"#e5e6F9"},title:{text:"",font:{size:11}},xaxis:{title:"impulse",tickfont:{color:"#4D5663"},gridcolor:"#E1E5ED",titlefont:{color:"#4D5663"},zerolinecolor:"#E1E5ED"},yaxis:{title:"value",tickfont:{color:"#4D5663"},zeroline:!1,gridcolor:"#E1E5ED",titlefont:{color:"#4D5663"},zerolinecolor:"#E1E5ED"},plot_bgcolor:"#F5F6F9",paper_bgcolor:"#F2F6F9"};function d(t){return"hsl(".concat(137.5*t%360,", ").concat(70,"%, ").concat(50,"%)")}function y(t,e,n,i){return{x:t,y:e,name:n,line:{color:i,width:1.3},mode:"lines",type:"scatter"}}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"plot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t/o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5*t/o,a=new f(i,o,.98,.212,.14);try{a.solvePaper(t,e,n,r)}catch(t){console.error(t)}var s=a.extractValues,l=s((function(t){return t.P}));p.title.text="<b>Figure.12</b> Slip–impulse curves \nfor V0 = 2 m/s, α = 45◦,ωS0 = 2V0/R, and ωT0 = 1.5V0/R \n<br>(s and φ are for the slip at the cushion, \nand sʹ and φʹ are for the slip at the table)",window.Plotly.newPlot("mathaven-impulse",[y(l,s((function(t){return t.s})),"s",d(0)),y(l,s((function(t){return t.φ})),"φ",d(1)),y(l,s((function(t){return t.sʹ})),"s'",d(2)),y(l,s((function(t){return t.φʹ})),"φʹ",d(3)),y(l,s((function(t){return t.WzI})),"WzI",d(4)),y(l,s((function(t){return t.P})),"P",d(5))],p,v)}}],n&&g(e.prototype,n),t}();function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"getFinalState",value:function(t,e,n,a){try{var s=new r.z(i,o,.98,.212,.14);s.solvePaper(t,e,n,a);var l=s.vy,u=s.vx;return{beta:Math.atan2(-l,u)*(180/Math.PI),speed:Math.sqrt(u*u+l*l)}}catch(t){return console.error(t),{beta:NaN,speed:NaN}}}},{key:"plot",value:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return 0},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t){return t/o},a=[],s=[],l=[],u=-1;u<=2;u++){var c=[],h=[];l=[];for(var f=1;f<90;f+=9){l.push(f);var g=this.getFinalState(1,f*(Math.PI/180),i(u),r(u));c.push(g.speed),h.push(g.beta)}a.push(c),s.push(h)}var b=l;p.title.text=n,window.Plotly.newPlot(t,[y(b,a[0],"k=-1",d(0)),y(b,a[1],"k=0",d(1)),y(b,a[2],"k=1",d(2)),y(b,a[3],"k=2",d(3))],p,v),window.Plotly.newPlot(e,[y(b,s[0],"k=-1",d(0)),y(b,s[1],"k=0",d(1)),y(b,s[2],"k=1",d(2)),y(b,s[3],"k=2",d(3))],p,v)}}],n&&w(e.prototype,n),t}(),P=n(4922),M=n(2651),k=n(12),R=n(3894);function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,"log",void 0),this.log=e}var e,n;return e=t,(n=[{key:"dynamicFriction",value:function(e){return t.a+t.b*Math.exp(-t.c*e)}},{key:"relativeVelocity",value:function(e,n,i,o){return Math.sqrt(Math.pow(e*Math.sin(o)-i*t.R,2)+Math.pow(Math.cos(o)*n*t.R,2))}},{key:"throwAngle",value:function(e,n,i,o){var r=this.relativeVelocity(e,n,i,o),a=this.dynamicFriction(r),s=Math.min(a*e*Math.cos(o)/r,1/7)*(e*Math.sin(o)-t.R*i),l=e*Math.cos(o);return this.log("inputs:v=".concat(e,", ωx=").concat(n,", ωz=").concat(i,", ϕ=").concat(o)),this.log("   v * Math.sin(ϕ) =".concat(e*Math.sin(o))),this.log("   CollisionThrow.R * ωz =".concat(t.R*i)),this.log("   Math.min((μ * v * Math.cos(ϕ)) / vRel, 1 / 7) =".concat(Math.min(a*e*Math.cos(o)/r,1/7))),this.log("   (v * Math.sin(ϕ) - CollisionThrow.R * ωz) =".concat(e*Math.sin(o)-t.R*i)),this.log(""),this.log("vRel = ",r),this.log("μ = ",a),this.log("numerator = ",s),this.log("denominator = ",l),this.log("throw = ",Math.atan2(s,l)),Math.atan2(s,l)}},{key:"plot",value:function(e,n,i,o){var r=new M.c(k.v_);r.vel.copy(new P.Pq0(0,e,0)),r.rvel.copy(new P.Pq0(n,0,i));var a=new P.Pq0(0,2*t.R).applyAxisAngle(k.up,o),s=new M.c(a);return R.F.model.updateVelocities(r,s),Math.atan2(R.F.model.tangentialImpulse,-R.F.model.normalImpulse)}}])&&x(e.prototype,n),t}();function F(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){O(t,e,n[e])}))}return t}S(A,"R",.029),S(A,"a",.01),S(A,"b",.108),S(A,"c",1.088);var V=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"degToRad",value:function(t){return t*(Math.PI/180)}},{key:"radToDeg",value:function(t){return t*(180/Math.PI)}},{key:"plotCutAngle",value:function(){var t=A.R;this.plot("collision-throw-roll",[.447,1.341,3.129],(function(e){return e/t})),this.plot("collision-throw-stun",[.447,1.341,3.129],(function(t){return 0})),this.plotRolls("collision-throw-varying-roll",[0,.25,.5,1],(function(e){return e/t}),(function(t){return 0}),(function(t){return t})),this.plotRolls("collision-throw-varying-side",[0,.25,.5,1],(function(e){return e/t}),(function(e){return 1/t*(e-45)/45}),(function(t){return 0})),new A(console.log).plot(.5,-15,-10,Math.PI/8)}},{key:"plot",value:function(t,e,n){var i=this,o=[],r=[];e.forEach((function(t){var e=[];r=[];for(var a=1;a<90;a+=1){r.push(a);var s=(new A).plot(t,n(t),0,i.degToRad(a));e.push(i.radToDeg(s))}o.push(e)}));var a=T({},p);a.title.text="Throw effect (WIP)\n    <br>throw vs. cut angle for various-speed ".concat(t," shots\n    <br>from https://billiards.colostate.edu/technical_proofs/new/TP_A-14.pdf"),window.Plotly.newPlot(t,[y(r,o[0],"slow",d(4)),y(r,o[1],"medium",d(5)),y(r,o[2],"fast",d(6))],a,v)}},{key:"plotRolls",value:function(t,e,n,i,o){var r=this,a=[],s=[];e.forEach((function(t){var e=[];s=[];for(var l=1;l<90;l+=1){s.push(l);var u=(new A).plot(1,n(t),i(l),r.degToRad(o(l)));e.push(r.radToDeg(u))}a.push(e)}));var l=T({},p);l.title.text="Throw effect (WIP)\n    <br>throw vs. cut angle for various-speed ".concat(t," shots\n    <br>from https://billiards.colostate.edu/technical_proofs/new/TP_A-14.pdf"),window.Plotly.newPlot(t,[y(s,a[0],"0",d(4)),y(s,a[1],"0.25",d(5)),y(s,a[2],"0.5",d(6)),y(s,a[3],"1.0",d(7))],l,v)}}],n&&F(e.prototype,n),t}();(new b).plot(),(new m).plot("mathaven-figure9-speed","mathaven-figure9-angle","<b>Figure.9</b> Rebound speed and rebound angle versus incident angle <br>\n    for different topspins of the ball, ωT0 = kV0/R and V0 = 1 m/s with no sidespin"),(new m).plot("mathaven-figure10-speed","mathaven-figure10-angle","<b>Figure.10</b> Rebound speed and rebound angle versus incident angle <br>\nfor different sidespins of the ball,ωS0 = kV0/R and V0 = 1 m/s with the ball rolling (ωT0 = V0/R)",(function(t){return t/o}),(function(t){return 1/o})),(new V).plotCutAngle()},4841:(t,e,n)=>{n.d(e,{z:()=>s});var i=n(12),o=n(5418);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(){function t(e,n,i,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"P",0),a(this,"WzI",0),a(this,"vx",void 0),a(this,"vy",void 0),a(this,"ωx",void 0),a(this,"ωy",void 0),a(this,"ωz",void 0),a(this,"s",void 0),a(this,"φ",void 0),a(this,"sʹ",void 0),a(this,"φʹ",void 0),a(this,"i",0),a(this,"N",100),a(this,"M",void 0),a(this,"R",void 0),a(this,"μs",void 0),a(this,"μw",void 0),a(this,"ee",void 0),this.M=e,this.R=n,this.ee=i,this.μs=o,this.μw=r}var e,n;return e=t,(n=[{key:"updateSlipSpeedsAndAngles",value:function(){var t=this.R,e=this.vx+this.ωy*t*o.Z3-this.ωz*t*o.o5,n=-this.vy*o.Z3+this.ωx*t,r=this.vx-this.ωy*t,a=this.vy+this.ωx*t;this.s=(0,i.RZ)((0,i.n7)(e,2)+(0,i.n7)(n,2)),this.φ=(0,i.FP)(n,e),this.φ<0&&(this.φ+=2*Math.PI),this.sʹ=(0,i.RZ)((0,i.n7)(r,2)+(0,i.n7)(a,2)),this.φʹ=(0,i.FP)(a,r),this.φʹ<0&&(this.φʹ+=2*Math.PI)}},{key:"compressionPhase",value:function(){for(var t=Math.max(this.M*this.vy/this.N,.001);this.vy>0;)this.updateSingleStep(t)}},{key:"restitutionPhase",value:function(t){var e=Math.max(t/this.N,.001);for(this.WzI=0;this.WzI<t;)this.updateSingleStep(e)}},{key:"updateSingleStep",value:function(t){if(this.updateSlipSpeedsAndAngles(),this.updateVelocity(t),this.updateAngularVelocity(t),this.updateWorkDone(t),this.i++>10*this.N)throw new Error("Solution not found")}},{key:"updateVelocity",value:function(t){var e=this.μs,n=this.μw,r=this.M;this.vx-=1/r*(n*(0,i.gn)(this.φ)+e*(0,i.gn)(this.φʹ)*(o.Z3+n*(0,i.F8)(this.φ)*o.o5))*t,this.vy-=1/r*(o.o5-n*o.Z3*(0,i.F8)(this.φ)+e*(0,i.F8)(this.φʹ)*(o.Z3+n*(0,i.F8)(this.φ)*o.o5))*t}},{key:"updateAngularVelocity",value:function(t){var e=this.μs,n=this.μw,r=this.M,a=this.R;this.ωx+=-5/(2*r*a)*(n*(0,i.F8)(this.φ)+e*(0,i.F8)(this.φʹ)*(o.Z3+n*(0,i.F8)(this.φ)*o.o5))*t,this.ωy+=-5/(2*r*a)*(n*(0,i.gn)(this.φ)*o.Z3-e*(0,i.gn)(this.φʹ)*(o.Z3+n*(0,i.F8)(this.φ)*o.o5))*t,this.ωz+=5/(2*r*a)*(n*(0,i.gn)(this.φ)*o.o5)*t}},{key:"updateWorkDone",value:function(t){var e=t*Math.abs(this.vy);this.WzI+=e,this.P+=t}},{key:"solvePaper",value:function(t,e,n,o){this.solve(t*(0,i.gn)(e),t*(0,i.F8)(e),-o*(0,i.F8)(e),o*(0,i.gn)(e),n)}},{key:"solve",value:function(t,e,n,i,o){this.vx=t,this.vy=e,this.ωx=n,this.ωy=i,this.ωz=o,this.WzI=0,this.P=0,this.i=0,this.compressionPhase();var r=this.ee*this.ee*this.WzI;this.restitutionPhase(r)}}])&&r(e.prototype,n),t}()},5418:(t,e,n)=>{n.d(e,{I:()=>r,Mz:()=>i,PX:()=>z,Qg:()=>R,R:()=>P,Wv:()=>S,XF:()=>w,XM:()=>b,Ys:()=>A,Z3:()=>y,_m:()=>d,cM:()=>F,e:()=>f,ee:()=>v,g:()=>a,gT:()=>u,gf:()=>l,jG:()=>M,kL:()=>c,kM:()=>O,ki:()=>V,ko:()=>T,m:()=>h,mu:()=>s,o5:()=>g,oV:()=>p,oo:()=>m,x3:()=>o,xO:()=>x});var i,o,r,a=9.8,s=.00985,l=.16,u=.85,c=.034,h=.23,f=.86,v=.98,p=.212,d=.14,y=.4,g=Math.sqrt(21)/5,b=2.84,w=1.42,m=.03075,P=.028575;function M(t){P=t}function k(){i=s*h*a*2/3*c,o=7/(5*Math.sqrt(2))*P*s*h*a,r=.4*h*P*P}function R(t){h=t,k()}function x(t){s=t,k()}function S(t){c=t,k()}function A(t){l=t}function F(t){f=t}function O(t){u=t}function T(t){p=t}function V(t){d=t}function z(t){v=t}k()},8090:(t,e,n)=>{n.d(e,{$8:()=>A,Gp:()=>P,JD:()=>h,Mq:()=>l,QK:()=>v,QV:()=>S,Qy:()=>T,Un:()=>m,c0:()=>w,lx:()=>f,p2:()=>c,s0:()=>b,t6:()=>V,yO:()=>M});var i=n(4922),o=n(12),r=n(5418),a=n(4841),s=new i.Pq0;function l(t,e){return s.copy(t).addScaledVector((0,o.KM)(e),r.R)}var u={v:new i.Pq0,w:new i.Pq0};function c(t,e){var n=function(t,e){return l(t,e).setZ(0)}(t,e);return u.v.copy((0,o.xb)(n).multiplyScalar(-r.gf*r.g)),u.w.copy((0,o.xb)((0,o.KM)(n)).multiplyScalar(2.5*r.gf*r.g/r.R)),u.w.setZ(r.Mz/(r.m*r.R*r.R)*-2.5*Math.sign(e.z)),u}function h(t){var e=new i.Pq0(t.x,t.y,0).length(),n=5/7*r.x3/(r.m*r.R)/e,o=5/7*r.x3/(r.m*r.R*r.R)/e;return u.v.set(-n*t.y,n*t.x,0),u.w.set(-o*t.x,-o*t.y,r.Mz/(r.m*r.R*r.R)*-2.5*Math.sign(t.z)),u}function f(t,e){var n=e.z;e.copy((0,o.KM)(t).multiplyScalar(1/r.R)),e.setZ(n)}function v(t,e,n,i){var r=i(e.clone().applyAxisAngle(o.up,t),n.clone().applyAxisAngle(o.up,t));return r.v.applyAxisAngle(o.up,-t),r.w.applyAxisAngle(o.up,-t),r}Object.freeze(u);var p=.1*r.R,d=Math.asin(p/r.R),y=(0,o.F8)(d),g=(0,o.gn)(d);function b(t,e){return new i.Pq0(t.x*y-t.z*g+r.R*e.y,-t.y-r.R*e.z*g+r.R*e.x*y)}function w(t){return t.x*g}function m(t){var e=3.5/r.m;return t.length()/e}function P(t){var e,n=1/r.m,o=.39+.257*(e=new i.Pq0(t/g,0,0)).x-.044*e.x*e.x;return r.gT*((1+o)*t)/n}function M(t,e){var n=P(w(t));return m(b(t,e))<=n}function k(t,e){return{c:w(t),s:b(t,e),A:3.5/r.m,B:1/r.m}}function R(t,e){var n=k(t,e),i=n.c,o=n.s,a=n.A,s=n.B,l=(1+r.e)*(i/s);return F(-o.x/a*y-l*g,o.y/a,o.x/a*g-l*y)}function x(t,e){var n=k(t,e),i=n.c,o=n.B,a=(1+r.e)*(i/o),s=function(t){return.471-.241*Math.atan2(Math.abs(t.y),t.x)}(t),l=Math.atan2(t.y,t.x),u=Math.cos(l),c=Math.sin(l);return F(-s*a*u*g-a*g,s*a*c,s*a*u*g-a*y)}function S(t,e){return M(t,e)?R(t,e):x(t,e)}function A(t,e){var n=R(t,e),i=x(t,e),o=Math.sign(t.y)===Math.sign(e.z)?Math.cos(Math.atan2(t.y,t.x)):1;return{v:i.v.lerp(n.v,o),w:i.w.lerp(n.w,o)}}function F(t,e,n){return{v:new i.Pq0(t/r.m,e/r.m),w:new i.Pq0(-r.R/r.I*e*y,r.R/r.I*(t*y-n*g),r.R/r.I*e*g)}}function O(t,e){var n=new a.z(r.m,r.R,r.ee,r.oV,r._m+.1);n.solve(t.x,t.y,e.x,e.y,e.z);var o=new i.Pq0(n.vx,n.vy,0),s=new i.Pq0(n.ωx,n.ωy,n.ωz);return{v:o.sub(t),w:s.sub(e)}}function T(t,e){return v(Math.PI/2,t,e,O)}function V(t,e){var n=Math.atan2(-t.x,t.y),i=2.5*e.length()*(t.length()*r.R)/(r.R*r.R),a=e.clone().normalize();return(0,o.KM)(a).applyAxisAngle(a,n).multiplyScalar(i)}}},t=>{t(t.s=4057)}]);